# Solutions

This directory can be used to provide solutions for the task. There are two types of solutions:
*correct* and *partial*.

## Correct Solutions

To create a correct solution place it in the `correct/` subdirectory in any of the languages
accepted by ocimatic.

A correct solution is expected to pass all the test cases, and
it has two purposes.

1. **Generating expected output:** When you run `ocimatic gen-expected`, ocimatic
randomly picks one of the correct solution (prioritizing C++ solutions) to generate the
expected output by running it against the input generated by the testplan.

2. **Validating dataset**: We must try to have as many correct solutions from different
people as possible. If the task can be solved by more than one strategy, we should provide
solutions for all of them. In tasks where the time matters, we must also try to write the
slowest correct solution that is expected to pass (tipically in Java) so we can validate
it is possible to differentiate it from partial solutions.

## Partial Solutions

Partial solutions go in the `partial/` subdirectory. Each partial solution must include
a comment specifying the expected result for each subtask. The format of this comment looks
like this (in C++):

```C++
// @ocimatic::expected [st1=OK, st2=WA]
```

More specifically, the comment must start with the string `@ocimatic::expected`, and be
followed by a list of items of the form `st<n>=<OUTCOME>` where `<n>` is the number of
a subtask and `<OUTCOME>` is one of the following:

- `OK`: The solution passes all the test cases in the subtask.
- `TLE`: The solution exceeds the time limit in at least one test case and
   no test case fails for a reason other than the time limit being exceeded.
- `WA`: The solution produces a wrong answer in at least one test case
  and no test case fails for a reason other than giving a wrong answer.
- `FAIL`: The solution fails at least one test case for any reason. Prefer `TLE`
  or `WA` as they are stricter.

For example, the comment above means this partial solution is expected to pass subtask 1
and fail subtask 2 with a wrong answer.

Ocimatic will produce an error if a partial solution doesn't contain the comment or
if the specification doesn't include all subtasks.

## Correct Python solutions

Python solutions included in the `correct` directory are special.
By default they are not included in the runtime statistics used to calculate the
time limit for a task.
This is so the time is not artificially increased by a slow Python solution.
By default, Ocimatic still checks that correct Python solution pass all subtasks,
in particular that they don't give TLE.
If a Python solution gives TLE with the time limit calculated from non-python
solutions, you have two options:

- You can include the solution in statistics by adding a comment `@ocimatic::include-in-stats true`.
- You can add a `@ocimatic::expected` comment (in the same format used for partial solutions)
  indicating that some of the subtasks should give TLE. This means that you accept that the solution
  cannot get full score.
